<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ParhamGPT Lite</title>
<style>
body {font-family: sans-serif; background: #111; color: #fff; padding: 20px;}
#chat {background:#222; padding:10px; border-radius:8px; height:400px; overflow:auto; margin-bottom:10px;}
input {width:70%; padding:5px; border-radius:5px; border:none;}
button {padding:5px 10px; border-radius:5px; border:none; background:#4caf50; color:#fff; cursor:pointer;}
</style>
<script type="module">
import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.15.0';

// Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ù„ Ø³Ø¨Ú©
const generator = await pipeline('text-generation', 'Xenova/distilgpt2');

// Ø¯Ø³ØªÙˆØ± Ø«Ø§Ø¨Øª (Ú©Ù†ØªØ±Ù„ Ø´Ø®ØµÛŒØª)
const systemPrompt = `
ØªÙˆ ParhamGPT Ù‡Ø³ØªÛŒ. Ø³Ø§Ø²Ù†Ø¯Ù‡â€ŒØ§Øª: parham. 
Ù‡Ù…ÛŒØ´Ù‡ Ù…ÙˆØ¯Ø¨ØŒ Ø®Ù„Ø§ØµÙ‡ Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø¬ÙˆØ§Ø¨ Ø¨Ø¯Ù‡. 
Ø§Ú¯Ø± Ø³ÙˆØ§Ù„ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø´Ø¯ØŒ ØµØ±ÛŒØ­Ø§Ù‹ "parham" Ø±Ø§ Ø¨Ú¯Ùˆ. 
Ø§Ú¯Ø± Ø¬ÙˆØ§Ø¨ Ø±Ø§ Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†ÛŒØŒ Ø¨Ù†ÙˆÛŒØ³ "Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ù…".
`;

function appendMessage(who, text){
  const c = document.getElementById('chat');
  const div = document.createElement('div');
  div.innerHTML = `<b>${who}:</b> ${text}`;
  c.appendChild(div);
  c.scrollTop = c.scrollHeight;
}

window.send = async function() {
  const userInput = document.getElementById('user').value.trim();
  if(!userInput) return;
  appendMessage('ØªÙˆ', userInput);
  document.getElementById('user').value='';

  // Ø§Ú¯Ø± ÙˆØ±ÙˆØ¯ÛŒ Ø±ÛŒØ§Ø¶ÛŒ Ø³Ø§Ø¯Ù‡ Ø§Ø³ØªØŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†
  if(/^[0-9+\-*/ ().]+$/.test(userInput)){
    try {
      const result = eval(userInput); // Ù†Ù…ÙˆÙ†Ù‡: ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ØªØ³Øª
      appendMessage('ParhamGPT', String(result));
      return;
    } catch(e){}
  }

  const prompt = systemPrompt + '\n\nUSER: ' + userInput + '\n\nASSISTANT:';
  const out = await generator(prompt, { max_new_tokens: 150 });
  const text = out[0].generated_text.replace(prompt,'').trim();
  appendMessage('ParhamGPT', text);
}
</script>
</head>
<body>
<h2>ğŸ¤– ParhamGPT Lite</h2>
<div id="chat"></div>
<input id="user" placeholder="Ø³ÙˆØ§Ù„Øª Ø±Ùˆ Ø¨Ù¾Ø±Ø³...">
<button onclick="send()">Ø§Ø±Ø³Ø§Ù„</button>
</body>
</html>
